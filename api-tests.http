# API Testing File
# Use with REST Client extension in VS Code
# Install: https://marketplace.visualstudio.com/items?itemName=humao.rest-client

@baseUrl = http://localhost:3000/api/v1
@contentType = application/json

###############################################
# Health Check
###############################################

### Health Check
GET {{baseUrl}}/health

### Root Endpoint
GET {{baseUrl}}

###############################################
# User Endpoints
###############################################

### Create User 1
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "SecurePassword123"
}

### Create User 2
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "name": "Jane Smith",
  "email": "jane.smith@example.com",
  "password": "AnotherSecurePass456"
}

### Create User 3
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "name": "Bob Johnson",
  "email": "bob.johnson@example.com",
  "password": "BobsPassword789"
}

### Get All Users
GET {{baseUrl}}/users

### Get User by ID (replace with actual UUID after creating)
@userId = replace-with-actual-uuid
GET {{baseUrl}}/users/{{userId}}

### Update User
@userIdToUpdate = replace-with-actual-uuid
PATCH {{baseUrl}}/users/{{userIdToUpdate}}
Content-Type: {{contentType}}

{
  "name": "John Doe Updated",
  "email": "john.updated@example.com"
}

### Delete User
@userIdToDelete = replace-with-actual-uuid
DELETE {{baseUrl}}/users/{{userIdToDelete}}

###############################################
# Validation Tests (Should Fail)
###############################################

### Create User - Missing Name (Should return 400)
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "password123"
}

### Create User - Invalid Email (Should return 400)
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "not-an-email",
  "password": "password123"
}

### Create User - Short Password (Should return 400)
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "test@example.com",
  "password": "12345"
}

### Create User - Missing All Fields (Should return 400)
POST {{baseUrl}}/users
Content-Type: {{contentType}}

{
}

### Get User - Invalid UUID Format (Should return 400 or 404)
GET {{baseUrl}}/users/not-a-uuid

### Get User - Non-existent UUID (Should return 404)
GET {{baseUrl}}/users/123e4567-e89b-12d3-a456-426614174000

###############################################
# PowerShell Commands (Alternative)
###############################################

# Create User (PowerShell)
# Invoke-RestMethod -Method Post -Uri "http://localhost:3000/api/v1/users" `
#   -ContentType "application/json" `
#   -Body '{"name":"John Doe","email":"john@example.com","password":"password123"}'

# Get All Users (PowerShell)
# Invoke-RestMethod -Method Get -Uri "http://localhost:3000/api/v1/users"

# Get User by ID (PowerShell)
# $userId = "replace-with-uuid"
# Invoke-RestMethod -Method Get -Uri "http://localhost:3000/api/v1/users/$userId"

# Update User (PowerShell)
# $userId = "replace-with-uuid"
# Invoke-RestMethod -Method Patch -Uri "http://localhost:3000/api/v1/users/$userId" `
#   -ContentType "application/json" `
#   -Body '{"name":"Updated Name"}'

# Delete User (PowerShell)
# $userId = "replace-with-uuid"
# Invoke-RestMethod -Method Delete -Uri "http://localhost:3000/api/v1/users/$userId"

###############################################
# cURL Commands (Alternative)
###############################################

# Create User (cURL)
# curl -X POST http://localhost:3000/api/v1/users \
#   -H "Content-Type: application/json" \
#   -d '{"name":"John Doe","email":"john@example.com","password":"password123"}'

# Get All Users (cURL)
# curl http://localhost:3000/api/v1/users

# Get User by ID (cURL)
# curl http://localhost:3000/api/v1/users/{userId}

# Update User (cURL)
# curl -X PATCH http://localhost:3000/api/v1/users/{userId} \
#   -H "Content-Type: application/json" \
#   -d '{"name":"Updated Name"}'

# Delete User (cURL)
# curl -X DELETE http://localhost:3000/api/v1/users/{userId}
